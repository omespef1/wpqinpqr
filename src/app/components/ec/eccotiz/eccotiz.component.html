<div class="container">
  <div class="card card-gray">
    <div class="card-header bg-primary text-white">Parámetros de búsqueda</div>
    <div class="card-body">
      <div class="row">
        <div class="col-lg-3 col-md-6 col-xs-12 col-sm-12">
          <label for="ter_coda">Identificación</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text">
                <span><i class="fas fa-user-circle"></i></span>
              </div>
            </div>
            <input type="text" class="form-control" placeholder="Identificación" name="ter_coda" id="ter_coda" [(ngModel)]="par_busq.ter_coda" required #ter_coda="ngModel">
          </div>
          <div [hidden]="ter_coda.valid || ter_coda.pristine" class="alert alert-danger">
            Identificación es requerida
          </div>

        </div>
        <div class="col-lg-3 col-md-6 col-xs-12 col-sm-12">
          <label for="ter_nomb">Nombres</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text">
                <span><i class="fas fa-user-circle"></i></span>
              </div>
            </div>
            <input type="text" disabled class="form-control" placeholder="Nombre" name="ter_nomb" id="ter_nomb" [(ngModel)]="par_busq.ter_nomb" required #ter_nomb="ngModel">
          </div>
          <div [hidden]="ter_nomb.valid || ter_nomb.pristine" class="alert alert-danger">
            Nombre es requerido
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-xs-12 col-sm-12">
          <label for="fec_fini">Fecha inicial</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text">
                <span><i class="fas fa-user-circle"></i></span>
              </div>
            </div>
            <input matInput placeholder="Fecha inicial" [matDatepicker]="fec_finiP" type="text" class="form-control" name="fec_fini" id="fec_fini" [(ngModel)]="par_busq.fec_fini" required #fec_fini="ngModel">
            <mat-datepicker-toggle [for]="fec_finiP"></mat-datepicker-toggle>
            <mat-datepicker #fec_finiP touchUi></mat-datepicker>

          </div>
          <div [hidden]="fec_fini.valid || fec_fini.pristine" class="alert alert-danger">
            Fecha inicial es requerida
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-xs-12 col-sm-12">
          <label for="fec_ffin">Fecha final</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text">
                <span><i class="fas fa-user-circle"></i></span>
              </div>
            </div>
            <input matInput placeholder="Fecha final" [matDatepicker]="fec_ffinP" type="text" class="form-control" name="fec_ffin" id="fec_ffin" [(ngModel)]="par_busq.fec_ffin" required #fec_ffin="ngModel">
            <mat-datepicker-toggle [for]="fec_ffinP"></mat-datepicker-toggle>
            <mat-datepicker #fec_ffinP touchUi></mat-datepicker>

          </div>
          <div [hidden]="fec_ffin.valid || fec_ffin.pristine" class="alert alert-danger">
            Fecha final es requerida
          </div>
        </div>
        <div class="col-md-12 text-center pt-3">

          <button type="button" class="btn btn-success btn-block">Consultar</button>

        </div>
      </div>
    </div>
    </div>
    <div class="card card-gray">
      <div class="card-header bg-primary text-white">Cotizaciones</div>
      <div class="card-body">
        <div class="row">
          <ul class="nav nav-pills nav-fill">
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#cotizaciones">Cotizaciones</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#invitados">Invitados</a>
            </li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane fade show" id="cotizaciones" role="tabpanel" aria-labelledby="cotizaciones-tab">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">Operación</th>
                    <th scope="col">Número</th>
                    <th scope="col">Fecha</th>
                    <th scope="col">Coordinador</th>
                    <th scope="col">Ejecutivo</th>
                    <th scope="col">Capitán</th>
                    <th scope="col">Teléfono contacto</th>
                    <th scope="col">Correo contacto</th>
                    <th scope="col">Observaciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let cotizacion of cotizaciones">
                    <td>{{cotizacion.top_nomb}}</td>
                    <td><a (click)="setCotizacion(cotizacion)">{{cotizacion.cot_nume}}</a> </td>
                    <td>{{cotizacion.cot_fech}}</td>

                    <td>{{cotizacion.cor_coor}} - {{cotizacion.cot_ncoo}}</td>
                    <td>{{cotizacion.ter_coda_ej}} - {{cotizacion.ter_noco_ej}}</td>
                    <td>{{cotizacion.ter_coda_ej}} - {{cotizacion.ter_noco_ej}}</td>
                    <td>{{cotizacion.cot_tcoo}} </td>
                    <td>{{cotizacion.cot_mail}} </td>
                    <td>{{cotizacion.cot_obse}} </td>
                  </tr>

                </tbody>
              </table>
            </div>
            <div class="tab-pane fade show" id="invitados" role="tabpanel" aria-labelledby="invitados-tab">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Número</th>
                    <th scope="col">Identificación</th>
                    <th scope="col">Nombre</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let detalle of cotizacion.detalles;let i=index" (click)="showProductos(detalle)">
                    <th scope="row">{{i+1}}</th>
                    <td></td>
                    <td>{{detalle.des_fsal}}</td>
                    <td>{{detalle.cla_codi}} - {{detalle.cla_nomb}}</td>
                    <td>{{detalle.esp_codi}} - {{detalle.esp_nomb}}</td>
                    <td>{{detalle.des_capa}}</td>
                  </tr>
                </tbody>
              </table>
            </div>

          </div>





        </div>
      </div>
    </div>


    <!-- Modal de detalles de espacio -->



    <button id="btnModalDetalles" hidden type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalDetalles">
      Launch demo modal
    </button>

    <!-- Modal -->
    <div class="modal fade" id="modalDetalles" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog  modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Detalles</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="container">
              <ul class="nav nav-pills flex-column flex-sm-row">
                <li class="flex-sm-fill text-sm-center nav-link">
                  <a class="nav-link-active" data-toggle="tab" href="#espacios">Detalle de espacio</a>
                </li>
                <li class="flex-sm-fill text-sm-center nav-link">
                  <a class="nav-link" data-toggle="tab" href="#liquidación">liquidación</a>
                </li>
                <li>
                  <a class="flex-sm-fill text-sm-center nav-link" data-toggle="tab" href="#anticipos">Anticipo</a>
                </li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane fade show active" id="espacios" role="tabpanel" aria-labelledby="espacios-tab">

                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Fecha y hora de inicio</th>
                        <th scope="col">Fecha y hora de finalización</th>
                        <th scope="col">Clase</th>
                        <th scope="col">Espacio</th>
                        <th scope="col">Capacidad</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let detalle of cotizacion.detalles;let i=index" (click)="showProductos(detalle)">
                        <th scope="row">{{i+1}}</th>
                        <td>{{detalle.des_fing}}</td>
                        <td>{{detalle.des_fsal}}</td>
                        <td>{{detalle.cla_codi}} - {{detalle.cla_nomb}}</td>
                        <td>{{detalle.esp_codi}} - {{detalle.esp_nomb}}</td>
                        <td>{{detalle.des_capa}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="tab-pane fade show" id="liquidacion" role="tabpanel" aria-labelledby="liquidacion-tab">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th scope="col">Concepto</th>
                        <th scope="col">Valor</th>
                        <th scope="col">Valor base</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let liquida of cotizacion.liquidacion">
                        <td>{{liquida.liq_cons}}</td>
                        <td>{{liquida.liq_valo}}</td>
                        <td>{{liquida.liq_base}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="tab-pane fade show" id="anticipos" role="tabpanel" aria-labelledby="anticipos-tab">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th scope="col">Tipo de operación </th>
                        <th scope="col">Número </th>
                        <th scope="col">Fecha </th>
                        <th scope="col">Valor </th>
                        <th scope="col">Saldo </th>

                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let anticipo of cotizacion.anticipos">
                        <td>{{anticipo.tip_codi}} - {{anticipo.top_nomb}}</td>
                        <td>{{anticipo.fac_nume}}</td>
                        <td>{{anticipo.fac_fech}}</td>
                        <td>{{anticipo.det_vant}}</td>
                        <td>{{anticipo.det_sald}}</td>

                      </tr>

                    </tbody>
                  </table>

                </div>
              </div>
            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal de productos -->
    <!-- Button trigger modal -->

    <button id="btnModalProductos" hidden type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalProductos">
      Launch demo modal
    </button>

    <!-- Modal -->
    <div class="modal fade" id="modalProductos" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Productos</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">Tipo de operación </th>
                    <th scope="col">Número </th>
                    <th scope="col">Fecha </th>
                    <th scope="col">Valor </th>
                    <th scope="col">Saldo </th>

                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let producto of detalleEspacio.productos">
                    <td>{{producto.tip_codi}} - {{anticipo.top_nomb}}</td>
                    <td>{{producto.fac_nume}}</td>
                    <td>{{producto.fac_fech}}</td>
                    <td>{{producto.det_vant}}</td>
                    <td>{{producto.det_sald}}</td>

                  </tr>

                </tbody>
              </table>

            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>



  </div>
