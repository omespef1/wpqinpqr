
 <ngx-spinner bdColor="rgba(51,51,51,0.3)" size="large">
    <!-- <p text-center style="font-size: 15px; color: gray">{{loading}}</p> -->
</ngx-spinner>
<div class="jumbotron jumbotron-fluid">
    <div class="container">
        <h1 class="display-4">Generación de autoliquidación</h1>

    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-4 col-md-1 col-sm-1">
            <img src="data:image/jpeg;base64,{{logo}}" class="img-fluid" alt="Responsive image">
        </div>
    </div>

    <div class="card card-gray">
        <div class="card-header bg-primary text-white">Parámetros</div>
        <div class="card-body">
            <form #xbauliq="ngForm">
                <div class="row">
                    <div class="alert alert-info" role="alert">
                        * Mediante esta opción podrá generar la autoliquidación correspondiente a las cuentas por pagar
                        a la SuperIntendencia de Vigilancia y Seguridad Privada, para cada uno de los conceptos
                        pendientes y por cada una de las vigencias. Para ello, debe pulsar
                        sobre el botón "CONSULTAR Y/O LIQUIDAR". * Las cuentas e intereses se presentan con corte a la
                        fecha en la que se realiza la consulta. * Solo se presentan las cuentas que tienen saldos
                        pendientes de pago.
                    </div>
                </div>
                <div class="row">
                     <div class="alert alert-danger">
                      <p>  Si tiene informes financieros por reportar, esta autoliquidación no desplegará información asociada con ello.
                        Verifique si ha presentado toda la información financiera que le ha sido requerida. En caso de tener reportes pendientes, por favor repórtelos.
                        Los valores indicados solamente aplican para para la fecha de generación de la autoliquidación: {{today | date:'dd/MM/yyyy'}}. Si no realiza el pago en esta fecha por favor genere nuevamente la autoliquidación
                        </p>
                     </div>
                </div>
                <div class="row">
                    <div class="col-lg-2 col-md-3 col-xs-12 col-sm-12">
                        <label for="pro_codi">Nit</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <span> <span><i class="fas fa-id-card"></i></span></span>
                                </div>
                            </div>
                            <input type="text" [(ngModel)]="client" name="cli_coda" readonly=true class="form-control" placeholder="Nit">
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3 col-xs-12 col-sm-12">
                        <label for="pro_codi">Nombre Entidad</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <span> <span><i class="fas fa-id-card"></i></span></span>
                                </div>
                            </div>
                            <input type="text" name="ter_noco" readonly=true class="form-control" [(ngModel)]="ter_noco" placeholder="Nombre de entidad">
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-xs-12 col-sm-12">
                        <label for="pro_codi">Fecha de pago</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <span><i class="fas fa-calendar-alt"></i></span>
                                </div>
                            </div>
                            <input matInput placeholder="Fecha de pago" [min]="today" [matDatepicker]="fec_pago"
                                type="text" class="form-control" name="fec_pago" id="fec_pago" [(ngModel)]="par_fech"
                                required #fec_pago="ngModel" readonly>
                            <mat-datepicker-toggle [for]="fec_pago"></mat-datepicker-toggle>
                            <mat-datepicker disabled="false" #fec_pago touchUi></mat-datepicker>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-xs-12 col-sm-12">
                        <br>
                        <button type="button" class="btn btn-success btn-block" (click)="GetAutliq()">
                            <i [class]="!loading?'fa fa-check':'fa fa-cog fa-spin'">
                            </i> Consultar y/o Liquidar
                        </button>
                    </div>
                    <div class="col-lg-1 col-md-3 col-xs-12 col-sm-12">
                        <br>
                        <button type="button" class="btn btn-danger">
                            <i class="fa fa-trash">
                            </i> Limpiar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="card card-gray" *ngIf="cacxcob.length>0">
        <div class="card-header bg-primary text-white">Autoliquidación</div>
        <div class="card-body">

            <div class="row">
                    <table class="table table-striped table-hover table-bordered">
                            <thead class="thead-light table-info text-center">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Tipo Servicio</th>
                                    <th scope="col">Vigencia</th>
                                    <th scope="col">Concepto</th>
                                    <th scope="col">Descripción</th>
                                    <th scope="col">Base Gravable</th>
                                    <th scope="col">Tarifa</th>
                                    <th scope="col">Valor Inicial</th>
                                    <th scope="col">Saldo</th>
                                    <th scope="col">Saldo Intereses</th>
                                    <th scope="col">InteresesMora</th>
                                    <th scope="col">Total a Pagar</th>
                                    <th scope="col">Sel</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of cacxcob;let i = index">
                                    <td scope="row">
                                        {{ i }}
                                    </td>
                                    <td>
                                        {{ item.cts_nomb  }}
                                    </td>
                                    <td>
                                        {{ item.ddi_vige }}
                                    </td>
                                    <td>
                                        {{ item.top_nomb | titlecase }}
                                    </td>
                                    <td>
                                        {{ item.cxc_desc }}
                                    </td>
                                    <td>
                                        {{ item.cxc_tota }}
                                    </td>
                                    <td>
                                        Tarifa
                                    </td>
                                    <td>
                                        {{ item.cxc_tota }}
                                    </td>
                                    <td>
                                        {{ item.cxc_sald }}
                                    </td>                                    
                                    <td>
                                       Saldo intereses
                                    </td>
                                    <td>
                                    Intereses Mora
                                    </td>
                                    <td>
                                       Total
                                    </td>
                                    <td>
                                    <input type="checkbox" [disabled]="item.liq_apro" checked="true">
                                    </td>
                                </tr>
                                
                            </tbody>
                        </table>
            </div>
            
        </div>

    </div>


</div>

<app-gnempre title="Seleccione empresa" (accept)="_EmpreModal.dismiss()">
    <form>
        <div class="form-group">
            <label for="emp_codi" class="col-form-label"></label>
            <select class="form-control" id="usu_codi" name="usu_codi" [(ngModel)]="emp_codi" required
                #usu_codi="ngModel">
                <option value="0">Seleccione</option>
                <option *ngFor="let companie of companies" [value]="companie.emp_codi">{{companie.emp_nomb | titlecase}}
                </option>
            </select>
        </div>
    </form>
</app-gnempre>